{% extends 'base.html' %}
{% load static %}
{% block title %}QuickAnswer{% endblock %}


{% block content %}


  <!-- Search Box -->

  <div class="container" >
        <form class="search" method="GET" action="{% url 'search' %}">
            <input id="searchbar" name="searchtext" type="text" placeholder="Search" >
            <button  type="submit">
              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 172 172"
              style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#c6d2f7"><path d="M64.5,14.33333c-27.6214,0 -50.16667,22.54527 -50.16667,50.16667c0,27.6214 22.54527,50.16667 50.16667,50.16667c12.52732,0 23.97256,-4.67249 32.7819,-12.31771l3.05143,3.05143v9.26628l43,43l14.33333,-14.33333l-43,-43h-9.26628l-3.05143,-3.05143c7.64521,-8.80934 12.31771,-20.25458 12.31771,-32.7819c0,-27.6214 -22.54527,-50.16667 -50.16667,-50.16667zM64.5,28.66667c19.87509,0 35.83333,15.95824 35.83333,35.83333c0,19.87509 -15.95825,35.83333 -35.83333,35.83333c-19.87509,0 -35.83333,-15.95825 -35.83333,-35.83333c0,-19.87509 15.95824,-35.83333 35.83333,-35.83333z"></path></g></g></svg>
          </button>
        </form>
    </div>
    <br>


  <!-- Filter by Category Box -->

  {% if not searching %}  
  <div  class="container">
      <span>
      <form method="GET">
        <label for="selected_category">Filter By Category :</label>
        <select name="selected_category" onchange="this.form.submit();">
          {% if input == None or input == "All" %}
            <option>All</option>
          {% else %}      
            <option>{{input}}</option>
            <option>All</option>
          {% endif %}
          {% for category in Category %}
              <option>{{category.category}}</option>
          {% endfor %}
        </select>
      </form>
      </span>
  </div>
  {%endif%}




  <div class="container accordion" id="accordionExample">

    <!-- List View -->

    {% for query in page_obj %}
      <div class="container querybox rounded">
            <div class="queryheader row" >
              <span class="profilepicture col-">
                  
                  {% if query.user.profile.picture %}
                    <img src="{{query.user.profile.picture.url}}" alt="Profile Picture">
                  {% else %}
                    <img src="{% static 'images/anonymous_user.jpg'%}">
                  {% endif %}
              </span>
              <span class="profiledetail col-10 col-5">
                    <p class="name">{{query.user}}</p>
                    <p class="date">
                        Posted on: {{query.created_at|date:"d M Y"}}     Category : {{query.category}}
                    </p>
              </span>        
            </div>
            <div class="querybody" >
              <b>{{query.query_title}}</b>
              <p>{{query.query_text}}</p>
            </div>
            
            <div class="queryfooter">
               <ul>
                
                  <li>
                    {% if user.is_authenticated %}
                      {% if request.user in query.likes.all %}    
                          <a href="{% url 'postpreferencetoggle' pk=query.id  preference=1 %}" data-toggle="tooltip" title="Unlike" >
                              <img src="{% static 'images/Liked-icon.png'%}" class="preferenceicon">
                            </a>
                      {% else %}
                          <a href="{% url 'postpreferencetoggle' pk=query.id  preference=1 %}" data-toggle="tooltip" title="Like" >
                          <img src="{% static 'images/Liked2-icon.png'%}" class="preferenceicon">
                        </a>
                      {% endif %}
                          
                    {% else %}
                        <img src="{% static 'images/Liked-icon.png'%}" class="preferenceicon">
                    {% endif %}
                      <span >{{query.likes.count}}</span>
                    
                  </li>
                  
                  <li >
                    {% if user.is_authenticated %}
                      {% if request.user in query.dislikes.all %}
                          <a  href="{% url 'postpreferencetoggle' pk=query.id  preference=2 %}" data-toggle="tooltip" title="Undislike">
                              <img src="{% static 'images/Disliked-icon.png'%}" class="preferenceicon">
                          </a>
                      {% else %}
                          <a href="{% url 'postpreferencetoggle' pk=query.id  preference=2 %}" data-toggle="tooltip" title="Dislike" >
                            <img src="{% static 'images/Disliked2-icon.png'%}" class="preferenceicon">
                          </a>        
                     {% endif %}
                     {% else %}
                        <img src="{% static 'images/Disliked-icon.png'%}" class="preferenceicon">
                     {% endif %}
                     <span>{{query.dislikes.count}}<span>  
                  </li>
                  
                  <li >
                  <a href="#" data-toggle="collapse" data-target="#collapseExample{{ query.id }}" aria-expanded="false" aria-controls="collapseExample"
                  title="Comment">
                      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 172 172"
                      style=" fill:#000000;"><defs><linearGradient x1="45.45817" y1="16.45467" x2="127.495" y2="149.93025" gradientUnits="userSpaceOnUse" id="color-1_GCyCoqI6E4FP_gr1"><stop offset="0" stop-color="#34495e"></stop><stop offset="1" stop-color="#3498db"></stop></linearGradient></defs><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g><path d="M150.5,28.66667h-129c-3.95958,0 -7.16667,3.20708 -7.16667,7.16667v93.16667c0,3.95958 3.20708,7.16667 7.16667,7.16667h28.66667v28.6595c0,3.19275 3.85925,4.79092 6.11675,2.53342l31.19292,-31.19292h63.02367c3.95958,0 7.16667,-3.20708 7.16667,-7.16667v-93.16667c0,-3.95958 -3.20708,-7.16667 -7.16667,-7.16667z" fill="url(#color-1_GCyCoqI6E4FP_gr1)"></path><path d="M43,78.83333h86c3.95958,0 7.16667,-3.20708 7.16667,-7.16667v-7.16667c0,-3.95958 -3.20708,-7.16667 -7.16667,-7.16667h-86c-3.95958,0 -7.16667,3.20708 -7.16667,7.16667v7.16667c0,3.95958 3.20708,7.16667 7.16667,7.16667z" fill="#000000" opacity="0.05"></path><path d="M43,77.04167h86c2.967,0 5.375,-2.408 5.375,-5.375v-7.16667c0,-2.967 -2.408,-5.375 -5.375,-5.375h-86c-2.967,0 -5.375,2.408 -5.375,5.375v7.16667c0,2.967 2.408,5.375 5.375,5.375z" fill="#000000" opacity="0.07"></path><path d="M43,107.5h64.5c3.95958,0 7.16667,-3.20708 7.16667,-7.16667v-7.16667c0,-3.95958 -3.20708,-7.16667 -7.16667,-7.16667h-64.5c-3.95958,0 -7.16667,3.20708 -7.16667,7.16667v7.16667c0,3.95958 3.20708,7.16667 7.16667,7.16667z" fill="#000000" opacity="0.05"></path><path d="M43,105.70833h64.5c2.967,0 5.375,-2.408 5.375,-5.375v-7.16667c0,-2.967 -2.408,-5.375 -5.375,-5.375h-64.5c-2.967,0 -5.375,2.408 -5.375,5.375v7.16667c0,2.967 2.408,5.375 5.375,5.375z" fill="#000000" opacity="0.07"></path><path d="M111.08333,93.16667v7.16667c0,1.978 -1.60533,3.58333 -3.58333,3.58333h-64.5c-1.978,0 -3.58333,-1.60533 -3.58333,-3.58333v-7.16667c0,-1.978 1.60533,-3.58333 3.58333,-3.58333h64.5c1.978,0 3.58333,1.60533 3.58333,3.58333z" fill="#ffffff"></path><path d="M132.58333,64.5v7.16667c0,1.978 -1.60533,3.58333 -3.58333,3.58333h-86c-1.978,0 -3.58333,-1.60533 -3.58333,-3.58333v-7.16667c0,-1.978 1.60533,-3.58333 3.58333,-3.58333h86c1.978,0 3.58333,1.60533 3.58333,3.58333z" fill="#ffffff"></path></g></g></svg>
                  </a>
                  <span>{{ query.solution.count }}</span>
                  </li>

                  {% if userqueries %}

                  <li>
                      <a href="{% url 'post:query_edit' pk=query.pk %}" id="comment_toggle" data-toggle="tooltip" title="Edit">
                      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"width="30" height="30" viewBox="0 0 172 172"
                      style=" fill:#000000;"><defs><linearGradient x1="125.79381" y1="26.46919" x2="125.79381" y2="65.07781" gradientUnits="userSpaceOnUse" id="color-1_56304_gr1"><stop offset="0" stop-color="#315abd"></stop><stop offset="1" stop-color="#0875e9"></stop></linearGradient><linearGradient x1="86" y1="21.72575" x2="86" y2="150.04313" gradientUnits="userSpaceOnUse" id="color-2_56304_gr2"><stop offset="0" stop-color="#1a3064"></stop><stop offset="1" stop-color="#043f7c"></stop></linearGradient></defs><g transform="translate(0.86,0.86) scale(0.99,0.99)"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none" stroke="none"></path><g stroke="none"><path d="M132.98288,65.5535l-26.53638,-26.53637l11.3735,-11.3735c1.04812,-1.04812 2.74394,-1.04812 3.79206,0l22.747,22.747c1.04812,1.04812 1.04812,2.74394 0,3.79206z" fill="url(#color-1_56304_gr1)"></path><path d="M136.24819,69.87231l11.90025,-11.90025c3.13631,-3.13631 3.13631,-8.23719 0,-11.3735l-22.747,-22.747c-3.13631,-3.13631 -8.23719,-3.13631 -11.3735,0l-11.90025,11.90025c-1.7845,-0.47031 -3.7625,-0.02956 -5.16,1.36794l-3.79206,3.79206c-1.3975,1.3975 -1.83825,3.3755 -1.36794,5.16l-61.71306,61.71306l-1.36525,1.36525l-0.5375,0.5375l-6.37744,26.78631c-0.92181,3.87538 0.20962,7.869 3.02612,10.6855c2.8165,2.8165 6.81013,3.94794 10.6855,3.02344l26.78631,-6.37744l0.5375,-0.5375l1.36525,-1.36525l61.71575,-61.71575c1.7845,0.47031 3.7625,0.02956 5.16,-1.36794l3.79206,-3.79206c1.39481,-1.39212 1.83556,-3.37013 1.36525,-5.15463zM127.29881,75.035l-30.33112,-30.33113l3.79206,-3.79206l30.32844,30.32844zM63.04875,135.48763c-0.7525,-2.85681 -1.83288,-5.58194 -3.21963,-8.15387l56.0935,-56.0935l5.68675,5.68675zM40.08675,143.58775c-0.3225,-2.88638 -1.55875,-5.68406 -3.77594,-7.89856c-2.21719,-2.21719 -5.01219,-3.45344 -7.89856,-3.77594l1.87588,-7.87706c4.43169,0.71487 8.52744,2.78425 11.70944,5.96625c3.182,3.182 5.25138,7.28044 5.96625,11.70944zM45.78963,126.21038c-3.88881,-3.88881 -8.87144,-6.43925 -14.25987,-7.39062l1.24431,-5.22181c6.40162,1.18519 12.18244,4.19787 16.80762,8.82037c4.62519,4.6225 7.63519,10.406 8.82037,16.80762l-5.22181,1.24431c-0.95406,-5.38844 -3.50181,-10.37106 -7.39062,-14.25987zM53.37106,118.62894c-1.28194,-1.28194 -2.65256,-2.43756 -4.07694,-3.5045l55.25769,-55.25769l7.58144,7.58144l-55.25769,55.25769c-1.06694,-1.42438 -2.22256,-2.795 -3.5045,-4.07694zM44.66625,112.17088c-2.57194,-1.38675 -5.29706,-2.46712 -8.15387,-3.21962l58.56063,-58.56062l5.68675,5.68675zM117.82,27.64363c1.04544,-1.04544 2.74662,-1.04544 3.79206,0l22.747,22.747c1.04544,1.04544 1.04544,2.74662 0,3.79206l-11.3735,11.3735l-26.53638,-26.53638z" fill="url(#color-2_56304_gr2)"></path></g></g></g></svg>
                      </a>
                  </li>
                   
                  <li>
                    <a href="#"data-toggle="modal" data-target="#exampleModal" id="comment_toggle"data-toggle="tooltip" title="Delete" >
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 172 172"
                    style=" fill:#000000;"><g transform="translate(0.86,0.86) scale(0.99,0.99)"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none" stroke="none"></path><g stroke="none"><path d="M34.9375,51.0625h102.125l-8.0625,94.0625l-8.0625,8.0625h-69.875l-8.0625,-8.0625z" fill="#becde8"></path><path d="M67.1875,153.1875h-18.8125l-8.0625,-16.125l-5.375,-86h24.1875z" fill="#cad8ed"></path><path d="M136.28313,59.125l0.77937,-8.0625h-102.125l0.77937,8.0625z" fill="#c6d2f7"></path><path d="M102.125,51.0625l-2.6875,102.125h21.5l8.0625,-8.0625l8.0625,-94.0625z" fill="#c6d2f7"></path><path d="M142.4375,51.0625h-112.875c-2.96969,0 -5.375,-2.40531 -5.375,-5.375v-16.125c0,-2.96969 2.40531,-5.375 5.375,-5.375h112.875c2.96969,0 5.375,2.40531 5.375,5.375v16.125c0,2.96969 -2.40531,5.375 -5.375,5.375z" fill="#334fa3"></path><path d="M51.0625,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM37.625,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM64.5,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM77.9375,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM94.0625,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM107.5,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM120.9375,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM134.375,32.25c-1.48619,0 -2.6875,1.204 -2.6875,2.6875v5.375c0,1.4835 1.20131,2.6875 2.6875,2.6875c1.48619,0 2.6875,-1.204 2.6875,-2.6875v-5.375c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875z" fill="#062f5a"></path><path d="M142.4375,21.5h-30.81219l-8.35544,-12.5345c-1.49962,-2.24675 -4.00706,-3.5905 -6.708,-3.5905h-21.12375c-2.70094,0 -5.20837,1.34375 -6.708,3.5905l-8.35544,12.5345h-30.81219c-4.44513,0 -8.0625,3.61737 -8.0625,8.0625v16.125c0,4.44512 3.61737,8.0625 8.0625,8.0625h0.26875l9.48419,90.09306c0.71756,6.86119 6.46344,12.03194 13.36225,12.03194h66.64731c6.89612,0 12.642,-5.17075 13.36225,-12.03194l9.4815,-90.09306h0.26875c4.44512,0 8.0625,-3.61738 8.0625,-8.0625v-16.125c0,-4.44513 -3.61737,-8.0625 -8.0625,-8.0625zM73.20212,11.94594c0.49988,-0.74713 1.33569,-1.19594 2.236,-1.19594h21.12106c0.90031,0 1.73613,0.44881 2.236,1.19594l6.37206,9.55406h-38.3345zM127.34181,143.28138c-0.43269,4.11725 -3.88075,7.21863 -8.0195,7.21863h-66.64463c-4.13875,0 -7.58412,-3.10137 -8.01681,-7.21863l-9.42775,-89.53137h101.53375zM145.125,45.6875c0,1.48081 -1.204,2.6875 -2.6875,2.6875h-2.6875h-107.5c-0.05913,0 -0.11019,0.02956 -0.16931,0.03494c-0.05644,-0.00538 -0.1075,-0.03494 -0.16662,-0.03494h-2.35156c-1.4835,0 -2.6875,-1.20669 -2.6875,-2.6875v-16.125c0,-1.48081 1.204,-2.6875 2.6875,-2.6875h27.22975h58.4155h27.22975c1.4835,0 2.6875,1.20669 2.6875,2.6875z" fill="#062f5a"></path><path d="M115.5625,139.75h-10.75c-1.48619,0 -2.6875,1.204 -2.6875,2.6875c0,1.4835 1.20131,2.6875 2.6875,2.6875h10.75c1.48619,0 2.6875,-1.204 2.6875,-2.6875c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM94.0625,139.75h-37.625c-1.48619,0 -2.6875,1.204 -2.6875,2.6875c0,1.4835 1.20131,2.6875 2.6875,2.6875h37.625c1.48619,0 2.6875,-1.204 2.6875,-2.6875c0,-1.4835 -1.20131,-2.6875 -2.6875,-2.6875zM61.2965,117.38463c0.52406,0.52406 1.21206,0.78744 1.90006,0.78744c0.688,0 1.376,-0.26337 1.90006,-0.78744l20.90337,-20.90606l20.90337,20.90337c0.52406,0.52406 1.21206,0.78744 1.90006,0.78744c0.688,0 1.376,-0.26337 1.90006,-0.78744c1.05081,-1.05081 1.05081,-2.74931 0,-3.80012l-20.90337,-20.90337l20.90337,-20.90337c1.05081,-1.05081 1.05081,-2.74931 0,-3.80013c-1.05081,-1.05081 -2.74931,-1.05081 -3.80013,0l-20.90337,20.90337l-20.90337,-20.90337c-1.05081,-1.05081 -2.74931,-1.05081 -3.80013,0c-1.05081,1.05081 -1.05081,2.74931 0,3.80013l20.90337,20.90337l-20.90337,20.90337c-1.05081,1.05081 -1.05081,2.752 0,3.80281z" fill="#062f5a"></path></g></g></g></svg></a>
                  </li>

                  <!-- Modal -->
                  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <p>Are you sure you want to delete "{{ object }}"?</p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                          <a class="btn btn-primary" href="{% url 'post:query_remove' pk=query.pk %}" id="comment_toggle">Delete</a>
                          <!-- <button type="button" class="btn btn-primary">Delete</button> -->
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endif %}  
               </ul>
            </div>
            

            <div class="collapse" id="collapseExample{{ query.id }}"  data-parent="#accordionExample">
            <div id="comment_box" class="container ">
                  <br>
              
                  {% if user.is_authenticated %}
                      <a class="btn btn-primary btn-lg btn-block" href="{% url 'post:add_solution' pk=query.pk %}">Comment</a>
                  {% endif %}

                              
                  {% if usersolution %}
                          {% for comm in query.solution.all %}
                              {% if comm.user == request.user %} 
                                    <div class="container querybox shadow-none border border-primary">
                                      <div class="queryheader row">
                                        <div class="profilepicture col-">
                                             {% if query.user.profile.picture %}
                                                <img src="{{query.user.profile.picture.url}}" alt="Profile Picture">
                                              {% else %}
                                                <img src="{% static 'images/anonymous_user.jpg'%}">
                                              {% endif %}
                                        </div>
                                        <div class="profiledetail col-10 col-5">
                                              <p class="name">{{comm.user}}</p>
                                              <p class="date">
                                                  Posted on: {{comm.created_at|date:"d M Y"}}
                                              </p>                                           
                                        </div>        
                                      </div>
                                      <div class="querybody">
                                        <p>{{comm.solution_text}}</p>
                                      </div>
                                  
                                    
                                      <a class="btn btn-danger btn-sm btn-block " href="#"data-toggle="modal" data-target="#exampleModal" id="comment_toggle" >Delete</a>

                                              <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                  <div class="modal-content">
                                                    <div class="modal-header">
                                                      <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
                                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                      </button>
                                                    </div>
                                                    <div class="modal-body">
                                                      <p>Are you sure you want to delete "{{ object }}"?</p>
                                                    </div>
                                                    <div class="modal-footer">
                                                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                      <a class="btn btn-primary" href="{% url 'post:solution_remove' pk=comm.pk %}" id="comment_toggle">Delete</a>
                                                  
                                                    </div>
                                                  </div>
                                                </div>
                                              </div> 
                                    
                                    </div>
                                    
                                           
                              {% endif %}
                          {% endfor %}
                          {% for comm in query.solution.all %}
                              {% if comm.user != request.user %}      
                                    <div class="container querybox shadow-none border border-primary">
                                      <div class="queryheader row">
                                        <div class="profilepicture col-">
                                             {% if comm.user.profile.picture %}
                                                <img src="{{query.user.profile.picture.url}}" alt="Profile Picture">
                                              {% else %}
                                                <img src="{% static 'images/anonymous_user.jpg'%}">
                                              {% endif %}
                                        </div>
                                        <div class="profiledetail col-10 col-5">
                                              <p class="name">{{comm.user}}</p>
                                              <p class="date">
                                                  Posted on: {{comm.created_at|date:"d M Y"}}
                                              </p>
                                           
                                        </div>        
                                      </div>

                                      <div class="querybody">
                                        <p>{{comm.solution_text}}</p>
                                      </div> 

                                    </div>
                              {% endif %}
                          {% endfor %}
                  
                  {% else %}
                            {% if query.solution.count%}
                                  {% for comm in query.solution.all %}
                                    
                                    <div class="container querybox shadow-none border border-primary">
                                      <div class="queryheader row">
                                        <div class="profilepicture col-">
                                              {% if comm.user.profile.picture %}
                                                <img src="{{query.user.profile.picture.url}}" alt="Profile Picture">
                                              {% else %}
                                                <img src="{% static 'images/anonymous_user.jpg'%}">
                                              {% endif %}
                                        </div>
                                        <div class="profiledetail col-10 col-5">
                                              <p class="name">{{comm.user}}</p>
                                              <p class="date">
                                                  Posted on: {{comm.created_at|date:"d M Y"}}
                                              </p>
                                           
                                        </div>        
                                      </div>

                                      <div class="querybody">
                                        <p>{{comm.solution_text}}</p>
                                      </div> 
                                      <div class="queryfooter">
                                        <ul>
                                          <li>
                                              {% if user.is_authenticated %}
                                                {% if request.user in comm.likes.all %}    
                                                    <a href="{% url 'solutionpreferencetoggle' pk=comm.id  preference=1 %}" data-toggle="tooltip" title="Unlike" >
                                                        <img src="{% static 'images/Liked-icon.png'%}" class="preferenceicon">
                                                      </a>
                                                {% else %}
                                                    <a href="{% url 'solutionpreferencetoggle' pk=comm.id  preference=1 %}" data-toggle="tooltip" title="Like" >
                                                    <img src="{% static 'images/Liked2-icon.png'%}" class="preferenceicon">
                                                  </a>
                                                {% endif %}
                                                    
                                              {% else %}
                                                  <img src="{% static 'images/Liked-icon.png'%}" class="preferenceicon">
                                              {% endif %}
                                                <span >{{comm.likes.count}}</span>
                                              
                                            </li>
                                            
                                            <li >
                                              {% if user.is_authenticated %}
                                                {% if request.user in comm.dislikes.all %}
                                                    <a  href="{% url 'solutionpreferencetoggle' pk=comm.id  preference=2 %}" data-toggle="tooltip" title="Undislike">
                                                        <img src="{% static 'images/Disliked-icon.png'%}" class="preferenceicon">
                                                    </a>
                                                {% else %}
                                                    <a href="{% url 'solutionpreferencetoggle' pk=comm.id  preference=2 %}" data-toggle="tooltip" title="Dislike" >
                                                      <img src="{% static 'images/Disliked2-icon.png'%}" class="preferenceicon">
                                                    </a>        
                                               {% endif %}
                                               {% else %}
                                                  <img src="{% static 'images/Disliked-icon.png'%}" class="preferenceicon">
                                               {% endif %}
                                               <span>{{comm.dislikes.count}}<span>  
                                            </li>
                                        </ul>
                                        
                                      </div>
                                    </div>
                                  {% endfor %}
                            {% else %}
                                  <div class="jumbotron">
                                    <div class="container">
                                      <center>
                                        <div>
                                          <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                                          width="64" height="64"
                                          viewBox="0 0 172 172"
                                          style=" fill:#000000;"><defs><linearGradient x1="86" y1="14.00994" x2="86" y2="158.14594" gradientUnits="userSpaceOnUse" id="color-1_3CSvRCWmmMrw_gr1"><stop offset="0" stop-color="#00c6ff"></stop><stop offset="1" stop-color="#0072ff"></stop></linearGradient><linearGradient x1="86" y1="14.00994" x2="86" y2="158.14594" gradientUnits="userSpaceOnUse" id="color-2_3CSvRCWmmMrw_gr2"><stop offset="0" stop-color="#00c6ff"></stop><stop offset="1" stop-color="#0072ff"></stop></linearGradient><linearGradient x1="69.40738" y1="14.00994" x2="69.40738" y2="158.14594" gradientUnits="userSpaceOnUse" id="color-3_3CSvRCWmmMrw_gr3"><stop offset="0" stop-color="#00c6ff"></stop><stop offset="1" stop-color="#0072ff"></stop></linearGradient><linearGradient x1="86" y1="97.37888" x2="86" y2="113.87206" gradientUnits="userSpaceOnUse" id="color-4_3CSvRCWmmMrw_gr4"><stop offset="0" stop-color="#70dfff"></stop><stop offset="1" stop-color="#70afff"></stop></linearGradient><linearGradient x1="64.5" y1="75.422" x2="64.5" y2="90.41556" gradientUnits="userSpaceOnUse" id="color-5_3CSvRCWmmMrw_gr5"><stop offset="0" stop-color="#70dfff"></stop><stop offset="1" stop-color="#70afff"></stop></linearGradient><linearGradient x1="107.5" y1="75.422" x2="107.5" y2="90.41556" gradientUnits="userSpaceOnUse" id="color-6_3CSvRCWmmMrw_gr6"><stop offset="0" stop-color="#70dfff"></stop><stop offset="1" stop-color="#70afff"></stop></linearGradient></defs><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g><path d="M86,32.25c-29.63775,0 -53.75,24.11225 -53.75,53.75c0,29.63775 24.11225,53.75 53.75,53.75c29.63775,0 53.75,-24.11225 53.75,-53.75c0,-29.63775 -24.11225,-53.75 -53.75,-53.75zM86,134.375c-26.67344,0 -48.375,-21.70156 -48.375,-48.375c0,-26.67344 21.70156,-48.375 48.375,-48.375c26.67344,0 48.375,21.70156 48.375,48.375c0,26.67344 -21.70156,48.375 -48.375,48.375z" fill="url(#color-1_3CSvRCWmmMrw_gr1)"></path><path d="M155.875,86c0,-5.1385 -3.24919,-10.12112 -8.98969,-13.88631c0.61544,-3.4615 0.24994,-6.97675 -1.08306,-10.277c-1.42169,-3.526 -3.88344,-6.51988 -7.03588,-8.60806c1.52112,-6.84775 0.31713,-12.96181 -3.35669,-16.63563c-3.67381,-3.67381 -9.78519,-4.87781 -16.63562,-3.35669c-2.08819,-3.15244 -5.08475,-5.61419 -8.61075,-7.03588c-3.30025,-1.33569 -6.81012,-1.70387 -10.27431,-1.08306c-3.76788,-5.74319 -8.7505,-8.99237 -13.889,-8.99237c-5.1385,0 -10.12112,3.24919 -13.88631,8.98969c-3.46419,-0.61813 -6.97944,-0.25262 -10.277,1.08306c-3.52063,1.42169 -6.53062,3.88613 -8.6215,7.03319c-6.84237,-1.52381 -12.95375,-0.31175 -16.62488,3.35938c-3.67381,3.67381 -4.87781,9.79056 -3.35669,16.63563c-3.15244,2.08819 -5.61419,5.08475 -7.03588,8.61075c-1.333,3.30025 -1.70119,6.81281 -1.08306,10.27431c-5.7405,3.76787 -8.98969,8.7505 -8.98969,13.889c0,5.1385 3.24919,10.12112 8.98969,13.88631c-0.61544,3.4615 -0.24994,6.97675 1.08306,10.277c1.42169,3.526 3.88344,6.51987 7.03588,8.60806c-1.52113,6.84775 -0.31712,12.96181 3.35669,16.63563c3.6765,3.6765 9.80131,4.88319 16.63563,3.354c2.09087,3.15512 5.08744,5.61687 8.61075,7.03856c3.30025,1.33569 6.81012,1.70387 10.27431,1.08306c3.76787,5.74319 8.7505,8.99238 13.889,8.99238c5.1385,0 10.12112,-3.24919 13.88631,-8.98969c3.46419,0.61812 6.97944,0.25262 10.277,-1.08306c3.52331,-1.42169 6.51719,-3.88344 8.60806,-7.03856c6.84238,1.52919 12.96181,0.3225 16.63563,-3.354c3.67381,-3.67381 4.87781,-9.79056 3.35669,-16.63563c3.15244,-2.08819 5.61419,-5.08475 7.03588,-8.61075c1.333,-3.30025 1.70119,-6.81281 1.08306,-10.27431c5.74319,-3.76788 8.99237,-8.7505 8.99237,-13.889zM142.502,96.26625c-1.08306,0.61544 -1.60444,1.89469 -1.25506,3.09063c0.85731,2.93475 0.7095,5.97431 -0.42731,8.79081c-1.21206,2.99925 -3.47762,5.461 -6.38012,6.93375c-1.15831,0.58588 -1.73075,1.91619 -1.36256,3.1605c1.70387,5.74856 1.15294,10.74194 -1.47006,13.36763c-2.62569,2.62569 -7.61637,3.17663 -13.36762,1.46738c-1.23625,-0.36281 -2.57462,0.20425 -3.1605,1.36256c-1.47275,2.9025 -3.9345,5.17075 -6.93106,6.38281c-2.81919,1.13681 -5.85875,1.28731 -8.79081,0.42731c-1.20131,-0.35744 -2.47787,0.16931 -3.09063,1.25506c-2.838,5.00681 -6.67575,7.99531 -10.26625,7.99531c-3.5905,0 -7.42825,-2.9885 -10.26625,-7.998c-0.48913,-0.85731 -1.39213,-1.36256 -2.33813,-1.36256c-0.24994,0 -0.50525,0.03494 -0.7525,0.1075c-2.93744,0.85731 -5.977,0.7095 -8.79081,-0.42731c-2.99925,-1.21206 -5.461,-3.48031 -6.93375,-6.38281c-0.58856,-1.15831 -1.92694,-1.72269 -3.1605,-1.36256c-5.75125,1.70925 -10.74194,1.15831 -13.36763,-1.46738c-2.623,-2.62569 -3.17394,-7.61906 -1.47006,-13.36762c0.36819,-1.24431 -0.20425,-2.57462 -1.36256,-3.1605c-2.9025,-1.47275 -5.16806,-3.9345 -6.38013,-6.93106c-1.13681,-2.81919 -1.28731,-5.85875 -0.42731,-8.79081c0.34938,-1.19594 -0.16931,-2.47519 -1.25506,-3.09063c-5.00681,-2.838 -7.99531,-6.67575 -7.99531,-10.26625c0,-3.5905 2.9885,-7.42825 7.998,-10.26625c1.08306,-0.61544 1.60444,-1.89469 1.25506,-3.09063c-0.85731,-2.93475 -0.7095,-5.97431 0.42731,-8.79081c1.21206,-2.99925 3.47763,-5.461 6.38013,-6.93375c1.15831,-0.58588 1.73075,-1.91619 1.36256,-3.1605c-1.70387,-5.74856 -1.15294,-10.74194 1.47006,-13.36762c2.623,-2.623 7.62175,-3.17394 13.36762,-1.47006c1.25775,0.3655 2.58537,-0.21231 3.16856,-1.376l0.1505,-0.31981c1.4835,-2.73319 3.88881,-4.87781 6.77519,-6.04687c2.81919,-1.13681 5.85875,-1.28731 8.79081,-0.42731c1.19056,0.35206 2.47519,-0.16931 3.09063,-1.25506c2.83531,-5.00681 6.67306,-7.99531 10.26356,-7.99531c3.5905,0 7.42825,2.9885 10.26625,7.998c0.61544,1.08306 1.892,1.60713 3.09063,1.25506c2.93206,-0.86269 5.97431,-0.7095 8.79081,0.42731c2.99925,1.21206 5.461,3.47763 6.93375,6.38013c0.58588,1.15562 1.90006,1.72537 3.1605,1.36256c5.74319,-1.70119 10.74462,-1.15563 13.36763,1.47006c2.623,2.62569 3.17394,7.61906 1.47006,13.36762c-0.36819,1.24431 0.20425,2.57462 1.36256,3.1605c2.9025,1.47275 5.16806,3.9345 6.38013,6.93106c1.13681,2.81919 1.28731,5.85875 0.42731,8.79081c-0.34938,1.19594 0.16931,2.47519 1.25506,3.09063c5.00681,2.838 7.99531,6.67575 7.99531,10.26625c0,3.5905 -2.9885,7.42825 -7.998,10.26625z" fill="url(#color-2_3CSvRCWmmMrw_gr2)"></path><path d="M52.81206,58.65738l4.14681,3.41581c7.181,-8.70481 17.76706,-13.69819 29.04113,-13.69819v-5.375c-12.88656,0 -24.983,5.70556 -33.18794,15.65738z" fill="url(#color-3_3CSvRCWmmMrw_gr3)"></path><path d="M72.74525,115.5625c-1.66625,0 -3.01806,-1.48619 -2.69825,-3.10944c1.462,-7.4175 8.04906,-13.01556 15.953,-13.01556c7.90394,0 14.491,5.59806 15.95031,13.01556c0.31981,1.62325 -1.02931,3.10944 -2.69556,3.10944z" fill="url(#color-4_3CSvRCWmmMrw_gr4)"></path><circle cx="24" cy="31" transform="scale(2.6875,2.6875)" r="3" fill="url(#color-5_3CSvRCWmmMrw_gr5)"></circle><circle cx="40" cy="31" transform="scale(2.6875,2.6875)" r="3" fill="url(#color-6_3CSvRCWmmMrw_gr6)"></circle></g></g></svg>
                                        </div>
                                        <div class="title">No Comments</div>
                                      </center>
                                    </div>
                                  </div>
                            {% endif %}
                        <br>

                  {% endif %}
            </div>
      </div>
    </div>
    {% empty %}
      <br>
      <div class="jumbotron">
        <div class="container">
          <center>
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172"
              style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="#334fa3"><path d="M86,20.64c-19.92862,0 -36.12,16.19138 -36.12,36.12v1.35719c-7.3639,-0.94993 -10.05196,-5.36389 -13.34008,-8.65375c-0.00112,0 -0.00224,0 -0.00336,0c-4.01616,-4.01616 -10.57697,-4.01616 -14.59313,0c-2.00859,2.00867 -3.02344,4.6578 -3.02344,7.29656c0,10.29308 7.26593,20.12553 16.31313,25.55477c2.04184,1.22577 3.66882,2.36759 4.91477,3.4568c2.91012,2.54332 3.68163,6.76579 1.93836,10.24945l-9.22484,18.44969c-0.17678,0.35324 -0.2266,0.75655 -0.14109,1.14219c0,0 0.98586,4.34028 4.9114,8.72766c3.81025,4.25851 10.55214,8.59323 21.5168,9.66156c4.5832,10.24419 14.95898,17.35789 26.85148,17.35789c11.8925,0 22.26828,-7.1137 26.85148,-17.35789c10.96465,-1.06833 17.70655,-5.40305 21.5168,-9.66156c3.92555,-4.38738 4.9114,-8.72766 4.9114,-8.72766c0.0855,-0.38564 0.03568,-0.78895 -0.14109,-1.14219l-9.22484,-18.44969c-1.74204,-3.48408 -0.97155,-7.70631 1.93836,-10.24945c1.24537,-1.08871 2.87088,-2.23166 4.91141,-3.4568c9.04825,-5.42895 16.31648,-15.26083 16.31648,-25.55477c0,-2.63877 -1.01351,-5.28794 -3.02008,-7.29656c-0.00112,0 -0.00224,0 -0.00336,0c-4.01616,-4.01616 -10.57697,-4.01616 -14.59313,0c-3.28991,3.28999 -5.97952,7.70379 -13.34344,8.65375v-1.35719c0,-19.92862 -16.19138,-36.12 -36.12,-36.12zM86,24.08c18.06962,0 32.68,14.61038 32.68,32.68v3.40305c0.00067,0.46625 0.19058,0.91225 0.52622,1.23586c0.33565,0.32362 0.78828,0.49712 1.25424,0.48078c10.32157,-0.36474 14.48494,-7.03384 17.43516,-9.98406c2.70216,-2.70216 7.02659,-2.70216 9.72875,0c1.34948,1.35197 2.01563,3.10084 2.01563,4.86437c0,8.62606 -6.49177,17.71418 -14.64352,22.60523c-0.00112,0 -0.00224,0 -0.00336,0c-2.1584,1.29575 -3.9439,2.53874 -5.40523,3.81625c-4.10425,3.58694 -5.17513,9.53052 -2.75133,14.37812l8.90234,17.80469c-0.17086,0.65386 -0.94003,3.33539 -3.93719,6.68515c-3.3785,3.77598 -9.32162,7.83042 -20.07898,8.67055c-0.06575,-1.59963 -0.1634,-3.10548 -0.31242,-4.39742c-0.04407,-0.45104 -0.43056,-0.79051 -0.88352,-0.77601c-0.24276,0.00747 -0.47105,0.11724 -0.62848,0.30218c-0.15743,0.18495 -0.22932,0.42783 -0.19793,0.66867c0.18548,1.60795 0.30579,3.53055 0.34602,5.63367c-3.8961,9.26655 -13.31362,15.76891 -24.04641,15.76891c-10.73814,0 -20.16052,-6.50842 -24.05312,-15.78234c0.14629,-7.75399 1.64945,-12.32555 1.64945,-12.32555c0.09094,-0.26192 0.05005,-0.55161 -0.10984,-0.77812c-0.15989,-0.22651 -0.41916,-0.36205 -0.69641,-0.36407c-0.3767,-0.00316 -0.71161,0.23918 -0.8264,0.59797c0,0 -1.40556,4.29401 -1.69985,11.45211c-10.74853,-0.84255 -16.6885,-4.89621 -20.06555,-8.67055c-2.99716,-3.34976 -3.76632,-6.03129 -3.93719,-6.68515l8.90234,-17.80469c2.42601,-4.84802 1.35271,-10.79137 -2.75133,-14.37812c-1.46134,-1.27751 -3.24683,-2.5205 -5.40523,-3.81625c-0.00112,0 -0.00224,0 -0.00336,0c-8.15167,-4.89105 -14.64352,-13.97917 -14.64352,-22.60523c0,-1.76443 0.66341,-3.51216 2.01563,-4.86437c2.70216,-2.70216 7.02659,-2.70216 9.72875,0c2.94881,2.95036 7.11359,9.61932 17.43516,9.98406c0.46596,0.01634 0.9186,-0.15716 1.25424,-0.48078c0.33565,-0.32362 0.52555,-0.76962 0.52622,-1.23586v-3.40305c0,-18.06962 14.61038,-32.68 32.68,-32.68zM73.1,49.88c-4.26732,0 -7.74,3.47268 -7.74,7.74c0,4.26732 3.47268,7.74 7.74,7.74c4.26732,0 7.74,-3.47268 7.74,-7.74c0,-1.8576 -0.68319,-3.53973 -1.77711,-4.87445c0.03268,0.18748 0.05711,0.37665 0.05711,0.57445c0,1.9006 -1.5394,3.44 -3.44,3.44c-1.9006,0 -3.44,-1.5394 -3.44,-3.44c0,-1.54972 1.03359,-2.84539 2.44227,-3.27539c-0.51084,-0.10664 -1.04047,-0.16461 -1.58227,-0.16461zM98.9,49.88c-4.26732,0 -7.74,3.47268 -7.74,7.74c0,4.26732 3.47268,7.74 7.74,7.74c4.26732,0 7.74,-3.47268 7.74,-7.74c0,-1.8576 -0.68319,-3.53973 -1.77711,-4.87445c0.03268,0.18748 0.05711,0.37665 0.05711,0.57445c0,1.9006 -1.5394,3.44 -3.44,3.44c-1.9006,0 -3.44,-1.5394 -3.44,-3.44c0,-1.54972 1.03359,-2.84539 2.44227,-3.27539c-0.51084,-0.10664 -1.04047,-0.16461 -1.58227,-0.16461zM86,75.68c-3.7231,0 -6.88,2.62777 -6.88,6.02c-0.00439,0.31015 0.15856,0.59863 0.42645,0.75498c0.26789,0.15635 0.59921,0.15635 0.8671,0c0.26789,-0.15635 0.43084,-0.44484 0.42645,-0.75498c0,-2.30785 2.23358,-4.3 5.16,-4.3c2.92642,0 5.16,1.99215 5.16,4.3c-0.00439,0.31015 0.15856,0.59863 0.42645,0.75498c0.26789,0.15635 0.59921,0.15635 0.8671,0c0.26789,-0.15635 0.43084,-0.44484 0.42645,-0.75498c0,-3.39223 -3.1569,-6.02 -6.88,-6.02zM109.18977,118.66992c-0.27284,0.0087 -0.52534,0.14641 -0.68041,0.37106c-0.15507,0.22465 -0.19429,0.50958 -0.10568,0.76777c0,0 0.18154,0.55655 0.43672,1.64609c0.10761,0.46291 0.5701,0.75093 1.03301,0.64332c0.46291,-0.10761 0.75093,-0.5701 0.64332,-1.03301c-0.2677,-1.14302 -0.48039,-1.79391 -0.48039,-1.79391c-0.1157,-0.36739 -0.46156,-0.61306 -0.84656,-0.60133z"></path></g></g></svg>
            </div>
            <div class="title">No Query Available</div>
          <a class="btn btn-outline-primary" href="{% url 'post:querycreate' %}">Post Query</a>
          </center>
        </div>
      </div>
        
    {% endfor %}
    <br>



    {% if is_paginated %}
    <nav aria-label="Page navigation ">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?selected_category={{input}}&page={{ page_obj.previous_page_number }}" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
          </li>
        {% else %}
          <li class="page-item disabled"><a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
        {% endif %}

        {% for l in  paginator.page_range %}
            {% if l <= page_obj.number|add:4 and l >= page_obj.number|add:-4 %}
                <li class="page-item"><a class="page-link" href="?selected_category={{input}}&page={{forloop.counter}}">{{forloop.counter}}</a></li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}        
          <li class="page-item">
            <a class="page-link" href="?selected_category={{input}}&page={{ page_obj.next_page_number }}"  aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
          </li>
        {% else %}
          <li class="page-item disabled"><a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
        {% endif %}
      </ul>
    </nav>
  </div>
  {% endif %}

</div>
{% endblock%}



